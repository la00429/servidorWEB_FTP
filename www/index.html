<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Servidor Web con FTP</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #f3f4f6 0%, #e9effd 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .container {
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            padding: 3rem;
            max-width: 980px;
            margin: 2rem;
            text-align: left;
        }

        /* Landing hero */
        .site-hero {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #fff;
            border-radius: 14px;
            padding: 2rem;
            margin-bottom: 1.5rem;
        }
        .site-hero h1 {
            color: #fff;
            font-size: 2.2rem;
            margin-bottom: 0.25rem;
        }
        .site-hero p { color: #e9f0ff; margin-bottom: 0.75rem; }
        .hero-cta { display: flex; flex-wrap: wrap; gap: 0.6rem; }
        .btn.light { background: #fff; color: #4a56a6; }
        .btn.white-outline { background: transparent; border: 1px solid #fff; color: #fff; }
        .quick-nav { display: flex; flex-wrap: wrap; gap: 0.5rem; margin-top: 0.5rem; }
        .quick-nav a { color: #fff; opacity: 0.9; text-decoration: underline; font-weight: 600; }

        /* Hero/Banner del informe */
        .report-hero {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1rem;
            background: linear-gradient(135deg, #edf2ff 0%, #e6fffa 100%);
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            padding: 1.25rem 1.25rem 1rem;
            margin: 1rem 0 1.25rem;
        }
        .report-hero h2 {
            margin: 0 0 0.25rem;
            color: #2d3748;
        }
        .report-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem 0.75rem;
            color: #4a5568;
            font-size: 0.95rem;
        }
        .badges { display: flex; flex-wrap: wrap; gap: 0.5rem; margin-top: 0.25rem; }
        .badge { background: #4c51bf; color: #fff; padding: 0.2rem 0.6rem; border-radius: 999px; font-size: 0.75rem; font-weight: 600; }
        .badge.alt { background: #319795; }
        .hero-actions { display: flex; flex-wrap: wrap; gap: 0.5rem; margin-top: 0.25rem; }
        .btn.outline { background: transparent; color: #4c51bf; border: 1px solid #4c51bf; }
        .btn.ghost { background: transparent; color: #4a5568; border: 1px solid #cbd5e0; }
        .divider { height: 1px; background: #e2e8f0; margin: 0.75rem 0; }

        h1 {
            color: #4a5568;
            margin-bottom: 1rem;
            font-size: 2.5rem;
        }

        h2 {
            color: #667eea;
            margin: 2rem 0 1rem;
            font-size: 1.6rem;
        }

        .services {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin: 2rem 0;
        }

        .service {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }

        .service h3 {
            color: #4a5568;
            margin-bottom: 0.5rem;
        }

        .service p {
            color: #718096;
            font-size: 0.9rem;
        }

        .status {
            display: inline-block;
            background: #48bb78;
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.8rem;
            margin: 0.5rem 0;
        }

        .info-box {
            background: #e2e8f0;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            text-align: left;
        }

        .info-box h4 {
            color: #2d3748;
            margin-bottom: 0.5rem;
        }

        .info-box code {
            background: #4a5568;
            color: #e2e8f0;
            padding: 0.2rem 0.4rem;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
        }

        .actions {
            margin-top: 1.5rem;
            display: grid;
            grid-template-columns: 1fr;
            gap: 1rem;
            text-align: left;
        }

        .btn {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 0.6rem 1rem;
            border-radius: 8px;
            text-decoration: none;
        }

        .btn.secondary {
            background: #4a5568;
        }

        footer {
            margin-top: 2rem;
            padding-top: 1rem;
            border-top: 1px solid #e2e8f0;
            color: #718096;
            font-size: 0.9rem;
        }

        /* Tabs */
        .tabs {
            margin-top: 1.25rem;
        }
        .tablist { display: none; }
        .tablist {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            border-bottom: 1px solid #e2e8f0;
            margin-top: 1rem;
        }
        .tablist button {
            background: transparent;
            border: 0;
            color: #4a5568;
            padding: 0.6rem 1rem;
            border-radius: 8px 8px 0 0;
            cursor: pointer;
            font-weight: 600;
            transition: color 200ms ease, background-color 200ms ease;
        }
        .tablist button[aria-selected="true"] {
            background: #edf2f7;
            color: #2d3748;
        }
        .tab-panels {
            position: relative;
            overflow: visible;
        }
        .tab-panel {
            display: none;
            opacity: 0;
            transform: translateY(6px);
            transition: opacity 220ms ease, transform 220ms ease;
        }
        .tab-panel.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }
        /* Content helpers */
        .lead {
            color: #4a5568;
            margin-bottom: 0.75rem;
        }
        .table-of-contents ul {
            list-style: none;
            padding-left: 0;
        }
        .table-of-contents ul li a {
            text-decoration: none;
            color: #667eea;
            font-weight: 600;
            display: block;
            padding: 0.4rem 0;
            transition: color 0.2s ease;
        }
        .table-of-contents ul li a:hover { color: #5a67d8; }
        .table-of-contents ul ul { padding-left: 20px; list-style: circle; }
        .gantt-diagram { max-width: 100%; height: auto; display: block; margin: 1rem auto; border: 1px solid #e2e8f0; border-radius: 8px; }

        /* Secciones tipo card */
        .card {
            background: #ffffff;
            border: 1px solid #edf2f7;
            border-radius: 12px;
            padding: 1.25rem;
            box-shadow: 0 6px 20px rgba(0,0,0,0.04);
            margin: 1rem 0;
        }
        .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
        @media (max-width: 860px) { .grid-2 { grid-template-columns: 1fr; } }
        .section-title { display: flex; align-items: center; gap: 0.5rem; }
        .section-title::before { content: ''; width: 8px; height: 24px; background: #667eea; border-radius: 4px; display: inline-block; }
    </style>
</head>
<body>
    <section class="site-hero">
        <h1>Informe Técnico de Infraestructura de Red</h1>
        <p>Proyecto ABP: DHCP, DNS y Servidor de Archivos en un entorno Dockerizado con NGINX y VSFTPD.</p>
        <div class="hero-cta">
            <button class="btn light" onclick="generateAndDownloadPDF()">Descargar Informe (PDF)</button>
            <a class="btn white-outline" href="#tabla-de-contenidos">Ver contenido</a>
        </div>
        <div class="quick-nav">
            <a href="#introduccion-contexto">Introducción</a>
            <a href="#marco-teorico">Marco teórico</a>
            <a href="#planificacion">Planificación</a>
            <a href="#desarrollo-proyecto">Desarrollo</a>
            <a href="#resultados-conclusiones">Resultados</a>
            <a href="#anexos-referencias">Anexos</a>
        </div>
    </section>

    <div class="container">
        <h1>Servidor Web + FTP</h1>
        <p class="lead">Servidor Ubuntu con nginx y vsftpd ejecutándose en Docker</p>

        <div class="tabs" id="tabs">
            <div class="tablist" role="tablist" aria-label="Navegación de secciones">
                <button role="tab" aria-selected="true" aria-controls="tab-informe" id="tab-informe-btn">Informe</button>
                <button role="tab" aria-selected="false" aria-controls="tab-servicios" id="tab-servicios-btn">Servicios</button>
                <button role="tab" aria-selected="false" aria-controls="tab-descargas" id="tab-descargas-btn">Descargas</button>
                <button role="tab" aria-selected="false" aria-controls="tab-subir" id="tab-subir-btn">Subir archivos</button>
            </div>

            <div class="tab-panels">
                <section id="tab-informe" class="tab-panel active" role="tabpanel" aria-labelledby="tab-informe-btn">
                    <header>
                        <h2>Informe ABP: Servidor DHCP, DNS y Servidor de Archivos</h2>
                        <p style="font-size: 1rem; margin-bottom: 0.25rem;">Grupo: David Santiago Lotero Rodríguez, Luis Eduardo Hernandez Rincon, Laura Vanessa Figueredo Martínez, Juan Sebastian Joe Felipe Rodriguez Mateus</p>
                        <p style="font-size: 1rem; margin-bottom: 0.25rem;">Docente: Ing. Frey Alfonso Santamaría Buitrago</p>
                        <p style="font-size: 1rem;">Fecha: 2025</p>
                    </header>

                    <section class="report-hero" aria-label="Resumen del informe y acciones">
                        <div>
                            <h2 style="font-size:1.4rem;">Resumen y Acciones</h2>
                            <div class="report-meta">
                                <span><strong>Proyecto:</strong> Infraestructura DHCP, DNS y Archivos</span>
                                <span>•</span>
                                <span><strong>SO:</strong> Fedora, pfSense, Ubuntu + Docker</span>
                            </div>
                            <div class="badges">
                                <span class="badge">DHCP</span>
                                <span class="badge alt">DNS</span>
                                <span class="badge">NGINX</span>
                                <span class="badge alt">VSFTPD</span>
                                <span class="badge">Docker</span>
                            </div>
                            <div class="hero-actions">
                                <button class="btn" onclick="generateAndDownloadPDF()">Imprimir / Descargar PDF</button>
                                <a class="btn outline" href="#tabla-de-contenidos">Ir al contenido</a>
                                <a class="btn ghost" href="#resultados-conclusiones">Ver conclusiones</a>
                            </div>
                        </div>
                        <div class="divider"></div>
                        <p class="lead" style="margin:0;">Este informe documenta el análisis, diseño, implementación y validación de una infraestructura de red con servicios de DHCP, DNS y servidor de archivos. Incluye planificación, justificación de tecnologías y recomendaciones.</p>
                    </section>

                    <!-- Carrusel del informe -->
                    <section class="card" id="informe-carrusel" aria-label="Carrusel del informe">
                        <style>
                            .carousel { position: relative; overflow: hidden; border-radius: 12px; border: 1px solid #e2e8f0; }
                            .carousel-track { display: flex; transition: transform 300ms ease; }
                            .carousel-slide { min-width: 100%; padding: 1.25rem; background: #ffffff; }
                            .carousel-title { color: #2d3748; margin-bottom: 0.5rem; font-size: 1.15rem; }
                            .carousel-nav { display: flex; justify-content: space-between; align-items: center; margin-top: 0.6rem; }
                            .carousel-arrow { background: #667eea; color: #fff; border: 0; border-radius: 8px; padding: 0.4rem 0.8rem; cursor: pointer; }
                            .carousel-dots { display: flex; gap: 6px; align-items: center; }
                            .dot { width: 10px; height: 10px; border-radius: 50%; background: #cbd5e0; cursor: pointer; }
                            .dot.active { background: #667eea; }
                            .muted { color: #4a5568; }
                            .small { font-size: 0.95rem; }
                        </style>
                        <div class="carousel" id="carousel">
                            <div class="carousel-track" id="carouselTrack">
                                <div class="carousel-slide">
                                    <h4 class="carousel-title">1. Introducción y Contexto</h4>
                                    <p class="small">El reto principal es diseñar e implementar servidores DHCP, DNS y de archivos para asegurar conectividad, resolución de nombres y transferencia de archivos en la red.</p>
                                    <h5 class="muted">Objetivo General</h5>
                                    <ul class="small">
                                        <li>Diseñar, implementar y documentar una configuración completa de DNS (pfSense), DHCP (Fedora) y servidor de archivos (NGINX).</li>
                                    </ul>
                                    <h5 class="muted">Objetivos Específicos</h5>
                                    <ul class="small">
                                        <li>Comprender protocolos de red y su rol.</li>
                                        <li>Aplicar procedimientos de configuración y verificar interoperabilidad.</li>
                                        <li>Evaluar resultados y documentar el proceso.</li>
                                    </ul>
                                    <h5 class="muted">Alcance</h5>
                                    <p class="small">Incluye análisis, diseño y configuración de DHCP, DNS y servidor de archivos; excluye servicios avanzados fuera del entorno de práctica.</p>
                                </div>
                                <div class="carousel-slide">
                                    <h4 class="carousel-title">2. Marco Teórico y Conceptual</h4>
                                    <h5 class="muted">2.1.1. Servidor DHCP</h5>
                                    <p class="small">Asigna parámetros de red automáticamente. Ciclo DORA: Discover, Offer, Request, Acknowledge.</p>
                                    <ul class="small"><li>Asignación dinámica, gestión de IPs, configuración centralizada, renovación de concesión.</li></ul>
                                    <h5 class="muted">2.1.2. Servidor DNS</h5>
                                    <p class="small">Traduce dominios a direcciones IP mediante resolución recursiva y caché.</p>
                                    <ul class="small"><li>Jerarquía, registros A/AAAA/CNAME/MX, caché, zonas de autoridad.</li></ul>
                                    <h5 class="muted">2.1.3. Servidor de Archivos</h5>
                                    <p class="small">Centraliza archivos y permite subir/descargar (FTP).</p>
                                </div>
                                <div class="carousel-slide">
                                    <h4 class="carousel-title">3. Planificación</h4>
                                    <h5 class="muted">División de Tareas</h5>
                                    <ul class="small">
                                        <li>David Santiago Lotero Rodriguez</li>
                                        <li>Luis Eduardo Hernandez Rincón</li>
                                        <li>Laura Vanesa Figueredo</li>
                                        <li>Juan Sebastian Joe Felipe Rodriguez Mateus</li>
                                    </ul>
                                    <h5 class="muted">Diagrama de Gantt</h5>
                                    <div class="image-container">
                                        <img src="https://via.placeholder.com/800x400?text=Diagrama+de+Gantt+Redes" alt="Diagrama de Gantt Redes" class="gantt-diagram">
                                    </div>
                                    <h5 class="muted">Justificación de SO</h5>
                                    <ul class="small">
                                        <li><strong>Fedora Server (DHCP):</strong> Innovación, seguridad y facilidad de configuración.</li>
                                        <li><strong>pfSense (DNS):</strong> Robusto, interfaz web y control granular.</li>
                                        <li><strong>Ubuntu + Docker (Archivos):</strong> Estabilidad y contenerización (NGINX, VSFTPD).</li>
                                    </ul>
                                </div>
                                <div class="carousel-slide">
                                    <h4 class="carousel-title">4. Desarrollo del Proyecto</h4>
                                    <h5 class="muted">4.1.1. DHCP (Fedora Server 42)</h5>
                                    <ol class="small">
                                        <li><strong>Actualizar paquetes:</strong> <code>sudo dnf update -y</code></li>
                                        <li><strong>Instalar:</strong> <code>sudo dnf install dhcp-server radvd bind bind-utils -y</code></li>
                                        <li><strong>Configurar /etc/dhcp/dhcpd.conf</strong> con red, rango, DNS y reserva por MAC.</li>
                                        <li><strong>Definir interfaz en /etc/sysconfig/dhcpd</strong></li>
                                        <li><strong>Activar servicio:</strong> <code>sudo systemctl enable --now dhcpd</code></li>
                                        <li><strong>Firewall:</strong> <code>sudo firewall-cmd --permanent --add-service=dhcp && sudo firewall-cmd --reload</code></li>
                                    </ol>
                                    <h5 class="muted">4.1.2. DNS (mismo servidor)</h5>
                                    <ol class="small">
                                        <li><strong>Instalar:</strong> <code>sudo dnf install bind bind-utils -y</code></li>
                                        <li><strong>Editar /etc/named.conf</strong> y zona <code>/var/named/grupocuatro.com.zone</code></li>
                                        <li><strong>Permisos:</strong> <code>chown named:named</code>, <code>chmod 640</code></li>
                                        <li><strong>Activar:</strong> <code>sudo systemctl enable --now named</code></li>
                                        <li><strong>Firewall:</strong> <code>sudo firewall-cmd --add-service=dns --permanent && sudo firewall-cmd --reload</code></li>
                                    </ol>
                                    <h5 class="muted">4.1.3. Servidor de Archivos (Ubuntu 24.04 + Docker)</h5>
                                    <ol class="small">
                                        <li>Instalar SO, habilitar SSH.</li>
                                        <li>Instalar Docker y configurar NGINX y VSFTPD en contenedores.</li>
                                    </ol>
                                    <h5 class="muted">4.1.4. Access Point (Router y Aerohive)</h5>
                                    <p class="small">Resumen: reset, configuración inicial, SSID/seguridad, desactivar DHCP, y aprovisionar Aerohive (DHCP, DNS, NTP, SSID y seguridad).</p>
                                    <h5 class="muted">4.2. Pruebas y Validación</h5>
                                    <ul class="small">
                                        <li>DHCP: clientes reciben IPs válidas y parámetros.</li>
                                        <li>DNS: resolución correcta de dominios internos.</li>
                                        <li>FTP: conexión, listado y transferencia.</li>
                                        <li>Conectividad general: pings internos/externos.</li>
                                    </ul>
                                </div>
                                <div class="carousel-slide">
                                    <h4 class="carousel-title">5. Resultados y Conclusiones</h4>
                                    <p class="small">Infraestructura funcional integrando DHCP, DNS y servidor de archivos; conectividad cableada e inalámbrica con servicios centralizados.</p>
                                    <h5 class="muted">Reflexión del Aprendizaje</h5>
                                    <p class="small">Se reforzaron conceptos de redes, Linux, pfSense y Docker, con enfoque en interoperabilidad y resolución de problemas.</p>
                                    <h5 class="muted">Recomendaciones</h5>
                                    <ul class="small">
                                        <li>Seguridad: TLS/FTPS/SFTP.</li>
                                        <li>Monitoreo: métricas y alertas.</li>
                                        <li>Respaldo: configs y datos.</li>
                                        <li>Automatización: Ansible/Puppet.</li>
                                        <li>Documentación continua.</li>
                                    </ul>
                                </div>
                                <div class="carousel-slide">
                                    <h4 class="carousel-title">6. Anexos y Referencias</h4>
                                    <div class="image-container">
                                        <img src="https://via.placeholder.com/700x400?text=Diagrama+de+Topologia+de+Red" alt="Diagrama de Topología de Red" class="gantt-diagram">
                                    </div>
                                    <ul class="small">
                                        <li>Documentación: DHCP (ISC), BIND, NGINX, VSFTPD, Fedora, Ubuntu, pfSense, TP-Link, Aerohive.</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="carousel-nav">
                            <button class="carousel-arrow" id="prevSlide" aria-label="Anterior">←</button>
                            <div class="carousel-dots" id="carouselDots" aria-label="Paginación"></div>
                            <button class="carousel-arrow" id="nextSlide" aria-label="Siguiente">→</button>
                        </div>
                    </section>

                    <!-- Tabla de contenidos eliminada para enfoque en carrusel -->

                    <!-- Secciones largas eliminadas; ahora todo vive en el carrusel -->
                </section>

                <section id="tab-servicios" class="tab-panel" role="tabpanel" aria-labelledby="tab-servicios-btn">
                    <h2>Estado de Servicios e Información de Conexión</h2>
        <div class="services">
            <div class="service">
                            <h3>Servidor Web</h3>
                <div class="status">Activo</div>
                <p>nginx sirviendo contenido estático en puerto 80</p>
            </div>
            <div class="service">
                            <h3>Servidor FTP</h3>
                <div class="status">Activo</div>
                <p>vsftpd para transferencia de archivos en puerto 21</p>
            </div>
        </div>
        <div class="info-box">
                        <h4>Acceso Web</h4>
            <p>URL: <code>http://localhost</code></p>
            <p>Puerto: <code>80</code></p>
        </div>
        <div class="info-box">
                        <h4>Acceso FTP</h4>
            <p>Servidor: <code>localhost</code></p>
            <p>Puerto: <code>21</code></p>
            <p>Usuario: <code>ftpuser</code></p>
            <p>Contraseña: <code>ftppass123</code></p>
            <p>Puertos pasivos: <code>21100-21110</code></p>
        </div>
        <div class="info-box">
                        <h4>Directorios</h4>
            <p>Web: <code>/var/www/html</code></p>
            <p>FTP: <code>/home/ftpuser</code></p>
        </div>
                </section>

                <section id="tab-descargas" class="tab-panel" role="tabpanel" aria-labelledby="tab-descargas-btn">
                    <h2>Descargas</h2>
        <div class="info-box">
                        <p>Descarga el informe técnico en formato PDF y accede a la carpeta de descargas.</p>
            <div class="actions">
                <button class="btn" id="generatePdfBtn" onclick="generateAndDownloadPDF()">Descargar Informe PDF</button>
                <a class="btn secondary" href="/downloads/" target="_blank">Ver carpeta de descargas</a>
                <div id="pdfStatus" style="margin-top: 10px; font-size: 0.9rem; color: #666;"></div>
            </div>
        </div>
                </section>

                <section id="tab-subir" class="tab-panel" role="tabpanel" aria-labelledby="tab-subir-btn">
                    <h2>Subir archivos</h2>
        <div class="info-box">
            <form id="uploadForm">
                <input type="file" id="fileInput" name="file" required />
                <button class="btn" type="submit">Subir</button>
                <span id="uploadStatus"></span>
            </form>
                    </div>
                </section>
            </div>
        </div>

        <footer>
            <p>Servidor creado con Docker + Ubuntu Server + nginx + vsftpd</p>
            <p>Sistema operativo: Ubuntu 22.04 LTS</p>
        </footer>
    </div>
    <script>
        // Tabs logic (accessible)
        const tabButtons = Array.from(document.querySelectorAll('.tablist [role="tab"]'));
        const tabPanels = Array.from(document.querySelectorAll('.tab-panel'));

        function activateTab(button) {
            tabButtons.forEach(btn => btn.setAttribute('aria-selected', String(btn === button)));
            tabPanels.forEach(panel => {
                const isActive = panel.id === button.getAttribute('aria-controls');
                panel.classList.toggle('active', isActive);
            });
            // Optional: update hash
            const id = button.getAttribute('aria-controls');
            if (id) location.hash = id;
        }

        tabButtons.forEach(btn => {
            btn.addEventListener('click', () => activateTab(btn));
            btn.addEventListener('keydown', (e) => {
                const idx = tabButtons.indexOf(btn);
                if (e.key === 'ArrowRight') {
                    const next = tabButtons[(idx + 1) % tabButtons.length];
                    next.focus();
                    activateTab(next);
                } else if (e.key === 'ArrowLeft') {
                    const prev = tabButtons[(idx - 1 + tabButtons.length) % tabButtons.length];
                    prev.focus();
                    activateTab(prev);
                }
            });
        });

        // Activate from hash on load
        window.addEventListener('load', () => {
            const hash = location.hash.replace('#', '');
            if (!hash) return;
            const targetBtn = tabButtons.find(b => b.getAttribute('aria-controls') === hash);
            if (targetBtn) activateTab(targetBtn);
        });

        const form = document.getElementById('uploadForm');
        const statusEl = document.getElementById('uploadStatus');
        form?.addEventListener('submit', async (e) => {
            e.preventDefault();
            statusEl.textContent = 'Subiendo...';
            const fileInput = document.getElementById('fileInput');
            const file = fileInput.files[0];
            const data = new FormData();
            data.append('file', file);
            try {
                const res = await fetch('/upload', {
                    method: 'POST',
                    body: data
                });
                const json = await res.json();
                if (json.ok) {
                    statusEl.textContent = `Subido: ${json.filename}`;
                } else {
                    statusEl.textContent = `Error: ${json.error || 'Desconocido'}`;
                }
            } catch (err) {
                statusEl.textContent = 'Error de red al subir';
            }
        });

        // Función para generar y descargar PDF
        async function generateAndDownloadPDF() {
            const btn = document.getElementById('generatePdfBtn');
            const status = document.getElementById('pdfStatus');
            
            if (btn) btn.disabled = true;
            if (btn) btn.textContent = 'Preparando...';
            if (status) status.textContent = 'Preparando el informe técnico para descarga...';
            
            try {
                const sourceSection = document.getElementById('informe-carrusel');
                if (!sourceSection) throw new Error('Sección de informe no encontrada');

                const printableHtml = `<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Informe Técnico</title>
<style>
@page { size: A4; margin: 2cm; }
body { font-family: 'Times New Roman', serif; color: #2d3748; line-height: 1.6; font-size: 12pt; }
h1, h2, h3, h4, h5 { color: #1a202c; }
code { background: #f8f9fa; border: 1pt solid #e9ecef; padding: 2pt 4pt; font-family: 'Courier New', monospace; font-size: 10pt; border-radius: 2pt; }
.table-of-contents ul { list-style: none; padding-left: 0; }
.table-of-contents ul ul { padding-left: 20px; list-style: circle; }
.gantt-diagram { max-width: 100%; height: auto; display: block; margin: 1rem auto; border: 1px solid #e2e8f0; border-radius: 8px; }
.print-header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: #fff; padding: 18px 22px; border-radius: 10px; margin-bottom: 18px; }
.print-header h1 { color: #fff; margin: 0 0 6px; font-size: 20pt; }
.print-meta { display: flex; flex-wrap: wrap; gap: 8px 14px; font-size: 10pt; opacity: 0.95; }
.pill { display: inline-block; background: rgba(255,255,255,0.15); color: #fff; padding: 2px 8px; border-radius: 999px; font-size: 9pt; margin-right: 6px; }
.toolbar { display: flex; gap: 8px; margin-top: 10px; }
.toolbar button { background: #fff; color: #4a5568; border: 0; border-radius: 6px; padding: 6px 10px; cursor: pointer; }
@media print { .toolbar { display: none; } }
</style>
</head>
<body>
<div class="print-header">
  <h1>Informe ABP: Servidor DHCP, DNS y Servidor de Archivos</h1>
  <div class="print-meta">
    <span>Grupo: David Santiago Lotero Rodríguez, Luis Eduardo Hernandez Rincon, Laura Vanessa Figueredo Martínez, Juan Sebastian Joe Felipe Rodriguez Mateus</span>
    <span>•</span>
    <span>Docente: Ing. Frey Alfonso Santamaría Buitrago</span>
    <span>•</span>
    <span>Fecha: 2025</span>
  </div>
  <div style="margin-top:8px;">
    <span class="pill">DHCP</span>
    <span class="pill">DNS</span>
    <span class="pill">NGINX</span>
    <span class="pill">VSFTPD</span>
    <span class="pill">Docker</span>
  </div>
  <div class="toolbar">
    <button onclick="window.print()">Imprimir / PDF</button>
  </div>
</div>
${sourceSection.innerHTML}
</body>
</html>`;

                const printWindow = window.open('', '_blank');
                if (!printWindow) throw new Error('La ventana emergente fue bloqueada');
                printWindow.document.open();
                printWindow.document.write(printableHtml);
                printWindow.document.close();
                printWindow.onload = function () {
                    setTimeout(() => {
                        printWindow.focus();
                        printWindow.print();
                        if (status) {
                            status.textContent = 'Lista la ventana para guardar como PDF.';
                            status.style.color = '#48bb78';
                        }
                    }, 300);
                };
            } catch (error) {
                console.error('Error:', error);
                if (status) {
                    status.textContent = `Error al preparar el informe: ${error.message}`;
                    status.style.color = '#e53e3e';
                }
            } finally {
                if (btn) { btn.disabled = false; btn.textContent = 'Descargar Informe PDF'; }
            }
        }

        // Carrusel
        (function initCarousel() {
            const track = document.getElementById('carouselTrack');
            const dotsContainer = document.getElementById('carouselDots');
            const prevBtn = document.getElementById('prevSlide');
            const nextBtn = document.getElementById('nextSlide');
            if (!track || !dotsContainer || !prevBtn || !nextBtn) return;

            const slides = Array.from(track.children);
            let index = 0;

            function renderDots() {
                dotsContainer.innerHTML = '';
                slides.forEach((_, i) => {
                    const d = document.createElement('button');
                    d.className = 'dot' + (i === index ? ' active' : '');
                    d.setAttribute('aria-label', 'Ir a la diapositiva ' + (i + 1));
                    d.addEventListener('click', () => goto(i));
                    dotsContainer.appendChild(d);
                });
            }

            function update() {
                track.style.transform = `translateX(-${index * 100}%)`;
                const allDots = dotsContainer.querySelectorAll('.dot');
                allDots.forEach((dot, i) => dot.classList.toggle('active', i === index));
            }

            function goto(i) {
                index = (i + slides.length) % slides.length;
                update();
            }

            prevBtn.addEventListener('click', () => goto(index - 1));
            nextBtn.addEventListener('click', () => goto(index + 1));

            renderDots();
            update();
        })();
    </script>
</body>
</html>